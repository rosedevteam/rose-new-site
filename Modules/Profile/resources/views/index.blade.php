@extends("profile::layouts.main")

@section('content')
    <div class="panel-title-box d-flex align-items-center justify-content-between">
        <div class="title-wrapper">
            <h3>مجموعه آموزشی رز</h3>
            <h2>پیشخوان کاربری</h2>
        </div>

        <div class="download-form">

        </div>
    </div>
    <div class="row">

        <div class="col-md-4">
            <div class="card panel-card mb-4 p-3 flex-row justify-content-between" id="orders-count">
                <div class="d-flex flex-column">
                    <h3 class="card-header color-default">
                        <a href="/orders">دوره های من</a>
                    </h3>
                    <div class="subtitle-wrapper my-3">
                        {{auth()->user()->orders()->where('status' , 'completed')->count()}}
                        دوره
                    </div>
                </div>
                <div class="icon">
                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path opacity="0.4"
                              d="M43.1733 5.33398H20.8266C11.1199 5.33398 5.33325 11.1207 5.33325 20.8273V43.1473C5.33325 52.8807 11.1199 58.6673 20.8266 58.6673H43.1466C52.8533 58.6673 58.6399 52.8807 58.6399 43.174V20.8273C58.6666 11.1207 52.8799 5.33398 43.1733 5.33398Z"
                              fill="#737887"/>
                        <path
                            d="M24.2668 31.998V28.0514C24.2668 22.958 27.8668 20.9047 32.2668 23.438L35.6802 25.4114L39.0935 27.3847C43.4935 29.918 43.4935 34.078 39.0935 36.6114L35.6802 38.5847L32.2668 40.558C27.8668 43.0914 24.2668 41.0114 24.2668 35.9447V31.998Z"
                            fill="#737887"/>
                    </svg>

                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card panel-card mb-4 p-3 flex-row justify-content-between" id="rose-wallet">
                <div class="d-flex flex-column">
                    <h3 class="card-header color-default">کیف پول</h3>
                    <div class="subtitle my-3">
                        {{auth()->user()->wallet->balance}}
                        تومان
                    </div>
                </div>

                <div class="icon">
                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path opacity="0.4"
                              d="M48.1068 36.1327C46.9868 37.226 46.3468 38.7993 46.5068 40.4793C46.7467 43.3593 49.3867 45.466 52.2668 45.466H57.3334V48.6393C57.3334 54.1593 52.8267 58.666 47.3067 58.666H16.6934C11.1734 58.666 6.66675 54.1593 6.66675 48.6393V30.6927C6.66675 25.1727 11.1734 20.666 16.6934 20.666H47.3067C52.8267 20.666 57.3334 25.1727 57.3334 30.6927V34.5327H51.9467C50.4534 34.5327 49.0934 35.1193 48.1068 36.1327Z"
                              fill="#737887"/>
                        <path
                            d="M39.6001 10.5317V20.665H16.6934C11.1734 20.665 6.66675 25.1717 6.66675 30.6917V20.9051C6.66675 17.7317 8.61342 14.905 11.5734 13.785L32.7467 5.78496C36.0534 4.5583 39.6001 6.98504 39.6001 10.5317Z"
                            fill="#737887"/>
                        <path
                            d="M60.1601 37.2511V42.7446C60.1601 44.2113 58.9867 45.4112 57.4934 45.4645H52.2668C49.3868 45.4645 46.7468 43.3579 46.5068 40.4779C46.3468 38.7979 46.9868 37.2245 48.1068 36.1312C49.0934 35.1179 50.4534 34.5312 51.9467 34.5312H57.4934C58.9867 34.5846 60.1601 35.7845 60.1601 37.2511Z"
                            fill="#737887"/>
                        <path
                            d="M37.3334 34H18.6667C17.5734 34 16.6667 33.0933 16.6667 32C16.6667 30.9067 17.5734 30 18.6667 30H37.3334C38.4267 30 39.3334 30.9067 39.3334 32C39.3334 33.0933 38.4267 34 37.3334 34Z"
                            fill="#737887"/>
                    </svg>

                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card panel-card mb-4 p-3 flex-row justify-content-between">
                <div class="d-flex flex-column">
                    <h3 class="card-header color-default">پشتیبانی</h3>
                    <p class="subtitle">
                        <a href="tel:02191691548">021-91691548</a>
                    </p>
                </div>

                <div class="icon">
                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M46.9866 28.6669C45.8399 28.6669 44.9333 27.7336 44.9333 26.6136C44.9333 25.6269 43.9466 23.5736 42.2933 21.7869C40.6666 20.0536 38.8799 19.0403 37.3866 19.0403C36.2399 19.0403 35.3333 18.1069 35.3333 16.9869C35.3333 15.8669 36.2666 14.9336 37.3866 14.9336C40.0533 14.9336 42.8533 16.3736 45.3066 18.9603C47.5999 21.3869 49.0666 24.4003 49.0666 26.5869C49.0666 27.7336 48.1333 28.6669 46.9866 28.6669Z"
                            fill="#737887"/>
                        <path
                            d="M56.6178 28.6667C55.4712 28.6667 54.5645 27.7333 54.5645 26.6133C54.5645 17.1467 46.8578 9.46666 37.4178 9.46666C36.2712 9.46666 35.3645 8.53333 35.3645 7.41333C35.3645 6.29333 36.2712 5.33333 37.3912 5.33333C49.1245 5.33333 58.6712 14.88 58.6712 26.6133C58.6712 27.7333 57.7378 28.6667 56.6178 28.6667Z"
                            fill="#737887"/>
                        <path opacity="0.4"
                              d="M31.4399 37.8933L22.7199 46.6133C21.7599 45.76 20.8266 44.88 19.9199 43.9733C17.1733 41.2 14.6933 38.2933 12.4799 35.2533C10.2933 32.2133 8.53325 29.1733 7.25325 26.16C5.97325 23.12 5.33325 20.2133 5.33325 17.44C5.33325 15.6267 5.65325 13.8933 6.29325 12.2933C6.93325 10.6667 7.94659 9.17333 9.35992 7.84C11.0666 6.16 12.9333 5.33333 14.9066 5.33333C15.6533 5.33333 16.3999 5.49333 17.0666 5.81333C17.7599 6.13333 18.3733 6.61333 18.8533 7.30666L25.0399 16.0267C25.5199 16.6933 25.8666 17.3067 26.1066 17.8933C26.3466 18.4533 26.4799 19.0133 26.4799 19.52C26.4799 20.16 26.2933 20.8 25.9199 21.4133C25.5733 22.0267 25.0666 22.6667 24.4266 23.3067L22.3999 25.4133C22.1066 25.7067 21.9733 26.0533 21.9733 26.48C21.9733 26.6933 21.9999 26.88 22.0533 27.0933C22.1333 27.3067 22.2133 27.4667 22.2666 27.6267C22.7466 28.5067 23.5733 29.6533 24.7466 31.04C25.9466 32.4267 27.2266 33.84 28.6133 35.2533C29.5733 36.1867 30.5066 37.0933 31.4399 37.8933Z"
                              fill="#737887"/>
                        <path
                            d="M58.5909 48.8801C58.5909 49.6268 58.4576 50.4001 58.1909 51.1468C58.1109 51.3601 58.0309 51.5734 57.9242 51.7868C57.4709 52.7468 56.8843 53.6534 56.1109 54.5068C54.8043 55.9468 53.3642 56.9868 51.7376 57.6534C51.7109 57.6534 51.6843 57.6801 51.6576 57.6801C50.0843 58.3201 48.3776 58.6668 46.5376 58.6668C43.8176 58.6668 40.9109 58.0268 37.8442 56.7201C34.7776 55.4134 31.7109 53.6534 28.6709 51.4401C27.6309 50.6668 26.5909 49.8934 25.6042 49.0668L34.3242 40.3468C35.0709 40.9068 35.7376 41.3334 36.2976 41.6268C36.4309 41.6801 36.5909 41.7601 36.7776 41.8401C36.9909 41.9201 37.2042 41.9468 37.4442 41.9468C37.8976 41.9468 38.2442 41.7868 38.5376 41.4934L40.5642 39.4934C41.2309 38.8268 41.8709 38.3201 42.4842 38.0001C43.0976 37.6268 43.7109 37.4401 44.3776 37.4401C44.8842 37.4401 45.4176 37.5468 46.0042 37.7868C46.5909 38.0268 47.2042 38.3734 47.8709 38.8268L56.6976 45.0934C57.3909 45.5734 57.8709 46.1334 58.1642 46.8001C58.4309 47.4668 58.5909 48.1334 58.5909 48.8801Z"
                            fill="#737887"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <div class="panel-title-box my-5">
        <div class="title-wrapper mb-4">
            <h3>همیشه درحال یادگیری باش!</h3>
            <h2>دوره های مجموعه آموزشی رز</h2>
        </div>
        <div class="row rose-courses my-2">
            <div class="row">
                @php
                    $userProducts = auth()->user()->orders()->with('products')->get()->pluck('products.*.id')->flatten()->unique()->toArray();
                @endphp
                @foreach(\Modules\Product\Models\Product::where('status' , 'public')->get() as $product)
                    <div class="col-md-3 course-item @if(!in_array($product->id , $userProducts)) false @endif">
                        @if(!in_array($product->id , $userProducts))
                            <p class="label">دانشجوی دوره نیستید</p>
                        @endif
                        <a href="{{route('products.show' , $product)}}">
                            <img
                                src="{{$product->image}}"
                                width="100%" style="border-radius: 10px;">
                        </a>
                    </div>
                @endforeach
            </div>

        </div>
    </div>
@endsection
